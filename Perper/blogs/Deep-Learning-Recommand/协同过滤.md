### 深度系统的进化之路

在2010年之前，推荐系统是千篇一律的协同过滤，从物品相似度的角度出发即ItemCF，从用户的角度出发即UserCF，后面在协同过滤的基础上衍生出来的矩阵分解模型MF，进一步提升了模型的泛化能力。



### UserCF

相似的用户感兴趣的东西都是相似的，因此可以推荐策略可以为相似用户购买（点击）的物品。

它的思路是根据用户是否购买物品，列一个**共现矩阵**，每一个作为i，j表示用户i与物品j之间的关系。因此用户可以通过购买行为表示成一个一维的数组。

计算相似用户。计算相似度的策略可以是**余弦相似度**、**皮尔逊相关系数**等。
$$
sim（i,j）= cos(i,j) = \frac{i·j}{||i||·||j||}
$$
对目标用户找到topN相似的用户之后。从topN用户中找出目标用户没有发生行为的item，然后准备推荐给目标用户。

需要对想要推荐的物品进行一个排序，排序的原则是，用户相似性与用户对物品喜好程度的乘积：
$$
R_{u,p} = \frac{\sum_{s\epsilon S}(W_{u,s}·R_{s,p})}{\sum_{s\epsilon S} W_{u,s}}
$$
得分越高的排在越前面。

UserCF通常难以应用，主要原始有：

1. 用户数量过多，存储用户与物品的喜好表将造成巨大的开销
2. 用户的历史记录（购买的商品）往往十分稀疏，找到的相似用户准确度十分低

### itemCF

itemCF的思想是物品之间存在相似性，当我购买一项物品的时候，我可能也会购买与之相似的物品。

首先构造物品相似矩阵：每个物品都有与之对应的购买人群，通过计算两个物品i,j之间共同购买的人比上所有购买的人的比，作为物品之间的相似度：
$$
W_{i,j} = \frac{|N(i)|\bigcap|N(j)|}{\sqrt{|N(i)|\bigcup|N(j)|}}
$$
得到物品之间的相似度矩阵之后，根据目标用户的购买历史中的物品，找出相似度最大的物品，排序后作为推荐的对象。如果多个物品产生的相似性需要进行累加。



### UserCF与itemCF的应用场景

UserCF基于用户相似，具有很强的社交特性，适合一些新闻推荐具有实时性，热点性的信息。

itemCF则更加适合一些兴趣较为稳定的应用，例如商品或电影的推荐。

### 协同过滤的不足

1. 协同过滤的共现矩阵进行体现了两个物品之间的联系，而不能进行推广到多种（即只表现为两个物品同时出现），因此内在信息的表达能来有限。容易导致热门物品出现概率高，容易和大量物品产生相似性。但冷门物品出现很少（数组很稀疏），通常难以推荐。（因此矩阵分解被提了出来。）
2. 协同过滤仅仅考虑到了用户和物品的交互行为（是否购买，是否出现）。未考虑到用户以及物品自身的各种信息，甚至是环境信息，因此以逻辑回归为核心的，能够综合各类特征的推荐系统称为主流。

